# Continue 日本語対応導入手順書

## 概要

Continue拡張機能の日本語対応を強化するための手順書です。現在のTinyLlamaから日本語対応モデルへの段階的移行を行います。

## 前提条件

- Continue拡張機能が正常に動作している
- Ollamaが正しく設定されている
- 十分なメモリ容量（最低4GB推奨）

## 手順1: 日本語対応モデルのダウンロード

### 推奨モデル（軽量順）

```bash
# 最軽量：Qwen2.5 0.5B（既存）
ollama pull qwen2.5:0.5b

# 軽量：Qwen2.5 1.5B（日本語対応良好）
ollama pull qwen2.5:1.5b

# 中軽量：CodeQwen 1.5B（コード特化）
ollama pull codeqwen:1.5b

# 標準：Qwen2.5 3B（最良の日本語対応）
ollama pull qwen2.5:3b
```

### メモリ使用量の目安

- Qwen2.5 0.5B: 約1GB
- Qwen2.5 1.5B: 約2GB
- CodeQwen 1.5B: 約2GB
- Qwen2.5 3B: 約4GB

## 手順2: 設定ファイルの更新

### 2.1 設定ファイルの場所

```
C:\Users\[ユーザー名]\.continue\config.json
```

### 2.2 バックアップの作成

```bash
# 現在の設定をバックアップ
copy "%USERPROFILE%\.continue\config.json" "%USERPROFILE%\.continue\config.json.backup"
```

### 2.3 新しい設定ファイルの適用

1. 上記の `continue_config_japanese.json` の内容をコピー
2. `C:\Users\[ユーザー名]\.continue\config.json` に貼り付け
3. VSCodeを再起動

## 手順3: 動作確認

### 3.1 基本動作確認

1. VSCodeでContinue拡張機能を開く
2. 日本語で質問を入力
3. 日本語で回答が返ってくることを確認

### 3.2 コード関連機能の確認

- **コード説明**: `説明して` または `/explain` コマンド
- **テスト作成**: `/test` コマンド
- **リファクタリング**: `/refactor` コマンド
- **バグ修正**: `/debug` コマンド

## 手順4: パフォーマンス最適化

### 4.1 メモリ不足時の対処

```bash
# 環境変数の設定
set OLLAMA_MAX_LOADED_MODELS=1
set OLLAMA_NUM_PARALLEL=1

# 現在のモデルを停止
ollama stop

# 軽量モデルで再開
ollama run qwen2.5:1.5b
```

### 4.2 モデルの切り替え

メモリ使用量に応じて適切なモデルを選択：

- **4GB以上**: Qwen2.5 3B
- **2-4GB**: Qwen2.5 1.5B または CodeQwen 1.5B
- **1-2GB**: Qwen2.5 0.5B
- **1GB未満**: TinyLlama（フォールバック）

## 手順5: トラブルシューティング

### 5.1 日本語が文字化けする場合

1. VSCodeの文字エンコーディングをUTF-8に設定
2. ターミナルの文字エンコーディングを確認
3. システムロケールを確認

### 5.2 メモリエラーが発生する場合

1. より軽量なモデルに変更
2. 他のアプリケーションを終了してメモリを解放
3. 環境変数でメモリ制限を設定

### 5.3 応答が遅い場合

1. モデルサイズを小さくする
2. `maxChunkSize` を調整
3. 不要な `contextProviders` を無効化

## 手順6: 設定の微調整

### 6.1 システムメッセージのカスタマイズ

プロジェクトに応じてシステムメッセージを調整：

```json
"systemMessage": "あなたはPythonを専門とする日本語プログラミングアシスタントです。Django、Flask、FastAPIに詳しく、初心者にも分かりやすく説明してください。"
```

### 6.2 カスタムコマンドの追加

プロジェクト固有のコマンドを追加：

```json
{
  "name": "django",
  "prompt": "Djangoのベストプラクティスに従って、選択されたコードを改善してください。日本語で説明してください。",
  "description": "Django特化の改善提案"
}
```

## 導入後のベストプラクティス

### 1. 質問の仕方

- 明確で具体的な日本語で質問
- コンテキストを含めて説明
- 期待する出力形式を指定

### 2. コードレビュー

- 定期的にコードの説明を求める
- 改善提案を積極的に活用
- テストの自動生成を活用

### 3. 継続的な改善

- 応答品質をモニタリング
- 必要に応じてモデルを変更
- 設定ファイルの定期的な見直し

## 注意事項

- 初回起動時はモデルのダウンロードに時間がかかります
- メモリ使用量を定期的に監視してください
- バックアップを定期的に作成することを推奨します