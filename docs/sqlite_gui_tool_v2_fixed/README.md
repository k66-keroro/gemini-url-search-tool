# SQLite GUI Tool v2

SQLite GUI Toolは、SQLiteデータベースを簡単に操作・管理するためのグラフィカルユーザーインターフェースツールです。
このツールを使用することで、SQLiteデータベースの閲覧、編集、インポート、エクスポート、分析などの操作を
GUIから簡単に行うことができます。

## 主な機能

- **データベース接続**: SQLiteデータベースファイルに接続
- **クエリ実行**: SQLクエリを実行し、結果を表形式で表示
- **スキーマ表示**: テーブル構造、カラム情報、インデックス情報の表示
- **データインポート**: CSV、TSV、Excelファイルからデータをインポート
- **データエクスポート**: テーブルやクエリ結果をCSV、Excelファイルにエクスポート
- **データ分析**: テーブルデータの基本統計、頻度分布、NULL値チェック、重複値チェック
- **コードフィールド変換**: 数値型として保存されているコードフィールドを文字列型に変換

## 動作環境

- Python 3.8以上
- 必要なライブラリ:
  - tkinter
  - sqlite3
  - pandas
  - pyperclip (オプション: クリップボードコピー機能に使用)

## 使い方

### 起動方法

```bash
python src/core/sqlite_gui_tool_v2_fixed.py
```

### データベース接続

1. 「データベース接続」ボタンをクリック
2. ファイル選択ダイアログからSQLiteデータベースファイル(.db, .sqlite, .sqlite3)を選択
3. 接続成功後、各タブの機能が有効になります

## 各タブの機能

### クエリ実行タブ

SQLクエリを実行し、結果を表示します。

- **クエリ入力**: 上部のテキストエリアにSQLクエリを入力
- **クエリ実行**: 「クエリ実行」ボタンをクリックしてクエリを実行
- **クエリ例**: 「クエリ例」ボタンをクリックして、サンプルクエリを選択
- **結果表示**: クエリ結果が下部のツリービューに表示
- **結果コピー**: 「結果をコピー」ボタンで結果をクリップボードにコピー
- **CSVエクスポート**: 「CSVエクスポート」ボタンで結果をCSVファイルに保存

### スキーマタブ

データベースのテーブル構造を表示します。

- **テーブル一覧**: 左側のリストボックスにテーブル一覧を表示
- **テーブル情報**: 選択したテーブルの行数、カラム数などの基本情報を表示
- **カラム情報**: テーブルのカラム定義（名前、データ型、制約など）を表示
- **インデックス情報**: テーブルのインデックス情報を表示
- **CREATE文表示**: 「CREATE文を表示」ボタンでテーブル作成SQLを表示
- **サンプルデータ表示**: 「サンプルデータを表示」ボタンでテーブルのデータをプレビュー

### インポートタブ

外部ファイルからデータをインポートします。

- **ファイル選択**: インポートするCSV、TSV、Excelファイルを選択
- **インポート設定**: ファイルタイプ、エンコーディング、区切り文字、ヘッダー有無を設定
- **テーブル設定**: インポート先のテーブル名と既存テーブルの処理方法を設定
- **データプレビュー**: 「プレビュー」ボタンでインポートデータをプレビュー
- **インポート実行**: 「インポート実行」ボタンでデータをインポート

### エクスポートタブ

データベースのデータを外部ファイルにエクスポートします。

- **エクスポート方法**: テーブル全体またはSQLクエリの結果をエクスポート
- **テーブル選択**: エクスポートするテーブルを選択
- **クエリ入力**: エクスポートするデータを取得するSQLクエリを入力
- **出力設定**: 出力形式（CSV/Excel）とエンコーディングを設定
- **出力先**: エクスポート先のファイルパスを指定
- **データプレビュー**: 「プレビュー」ボタンでエクスポートデータをプレビュー
- **エクスポート実行**: 「エクスポート実行」ボタンでデータをエクスポート

### データ分析タブ

テーブルデータの分析を行います。

- **テーブル・カラム選択**: 分析対象のテーブルとカラムを選択
- **分析タイプ**: 以下の分析タイプから選択
  - **基本統計**: 行数、ユニーク値数、最小値、最大値、平均値、合計値などの基本統計
  - **頻度分布**: カラム値の出現頻度分布
  - **NULL値チェック**: NULL値の数と割合、NULL値を含む行のサンプル
  - **重複値チェック**: 重複値の数と割合、重複値の分布
- **分析実行**: 「分析実行」ボタンで選択した分析を実行
- **分析結果**: テキストエリアとツリービューに分析結果を表示

### コードフィールド変換タブ

数値型として保存されているコードフィールドを文字列型に変換します。

- **変換対象フィールド分析**: 「変換対象フィールドを分析」ボタンで変換候補を検出
- **フィールド選択**: 変換するフィールドをチェックボックスで選択
- **一括選択/解除**: 「全て選択」「全て解除」ボタンで一括操作
- **変換実行**: 「選択したフィールドを変換」ボタンで変換を実行

## 技術的詳細

### ファイル構成

- `src/core/sqlite_gui_tool_v2_fixed.py`: メインのGUIツールコード
- `src/core/sqlite_manager.py`: SQLiteデータベース操作の基本クラス
- `src/core/code_field_converter.py`: コードフィールド変換機能
- `config/constants.py`: 定数定義（パスなど）

### 依存関係

- **tkinter**: GUIフレームワーク
- **sqlite3**: SQLiteデータベース操作
- **pandas**: データ処理
- **pyperclip**: クリップボード操作（オプション）

### 設計パターン

- **MVCパターン**: Model（SQLiteデータベース）、View（tkinterウィジェット）、Controller（イベントハンドラ）
- **タブベースUI**: 機能ごとにタブで分離
- **イベント駆動**: ユーザーアクションに応じた処理

## 注意事項

- 大量データの処理時はメモリ使用量に注意してください
- データベースファイルの変更前にバックアップを取ることをお勧めします
- コードフィールド変換は元に戻せない操作のため、慎重に行ってください